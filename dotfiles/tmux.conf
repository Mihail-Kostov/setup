# Tmux configuration file
#
# - http://code.tutsplus.com/tutorials/intro-to-tmux--net-33889

# FWI, bind-key === bind

# List of plugins
set -g @tpm_plugins '\
  tmux-plugins/tpm \
  tmux-plugins/tmux-sensible \
  tmux-plugins/tmux-resurrect \
'

# fix OS X error -10810
# - "LSOpenURLsWithRole() failed for the application * with error -10810"
# - "execution error: An error of type -10810 has occurred."
# https://github.com/atom/atom/issues/3093#issuecomment-59784274
set-option -g default-command "which reattach-to-user-namespace > /dev/null && reattach-to-user-namespace -l $SHELL || $SHELL"

# Navigate between Vim windows & Tmux panes seamlessly
# See .vimrc & https://github.com/christoomey/vim-tmux-navigator
is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?)(diff)?$"'
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

## enable mouse features for terminals that support it
set -g mode-mouse on
set -g mouse-resize-pane on
# the options below are boring most of the time
#set -g mouse-select-pane on
#set -g mouse-select-window on

## vi mode
#set-option -g status-keys vi
#set-window-option -g mode-keys vi

## windows starts at 1
set -g base-index 1

## Set window notifications
set-window-option -g monitor-activity on
set -g visual-activity on

# Remapping

# remap prefix to Control + x
set -g prefix C-x
unbind C-b
bind C-x send-prefix

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf

# alt+arrow to cycles thru windows
bind -n M-right next-window
bind -n M-left previous-window

# quit tmux
bind \ kill-server

# Color scheme
source-file ~/setup/submodules/solarized/tmux/tmuxcolors-light.conf

# Ressurect options

## add more process to restore
set -g @resurrect-processes '"npm start"'

## for vim
set -g @resurrect-strategy-vim 'session'

# Initializes TMUX plugin manager.
# Keep this line at the very bottom of tmux.conf.
run-shell '~/.tmux/plugins/tpm/tpm'

