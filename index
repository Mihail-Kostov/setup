#!/usr/bin/env zsh

# fonts
brewtap caskroom/fonts
brewcaskinstall font-fira-code
# brewcaskinstall font-fira-mono
# brewcaskinstall font-fira-sans

# browser
brewcaskinstall "FirefoxNightly" "firefox-nightly"
openifnot "FirefoxNightly"
setupsh-recipe firefox-user.js

## Ssh
setupsh-recipe ssh

## Zsh completion
brewinstall zsh-completions

# one keyboard/mouse for multiples machines
if ls /Applications/Synergy.app &> /dev/null
then
  open "http://synergy-project.org/"
  setupsh-accessibility-privacy-apps --insert synergy
fi

brewcaskinstall "Spectacle"

## Sync
## syncthing consume too much CPU for now (at least with 0.12)
# brewcaskinstall "syncthing"
# brewcaskinstall "QSyncthingTray"
brewcaskinstall "BitTorrent Sync"
openifnot "BitTorrent Sync"
setupsh-recipe custom-folders

## Some utilities
brewcaskinstall "Flux"
openifnot "Flux"
brewcaskinstall "iStat Menus"
openifnot "iStat Menus"

## Development
setupsh-recipe git
brewcaskinstall atom
brewcaskinstall "GitHub Desktop"

### Node
setupsh-recipe nvm
nvm install node --reinstall-packages-from=node
nvm alias default node
npm config progress=false
npm config cache-min=20000 # 6 hours (60*60*6)


# MAXIMUM SECURITY
brewcaskinstall "KeePassX"

if [ "$FIRSTRUN" = "true" ]; then osx-refresh; fi;

# safer than rm
npmig trash-cli

brewcaskinstall "VLC"
brewcaskinstall "MPlayerX"
npmig peerflix

# apps
brewcaskinstall "Prefs Editor"
brewcaskinstall "AppCleaner"
openifnot "AppCleaner"

##
# Stuff that are slow to download
# or that require human interaction
##
# dyndns
setupsh-recipe ddclient

# anti-thef
setupsh-recipe prey

##
# Less important stuff
#
# install later (not during the first run)
##
if [ "$FIRSTRUN" = "" ]
then
  # messaging
  brewcaskinstall "Slack"
  brewcaskinstall "Discord"
  brewcaskinstall "Gitter"

  # MORE BROWSER
  brewcaskinstall "Firefox"
  brewcaskinstall "Google Chrome"
  brewcaskinstall "/usr/local/bin/phantomjs" "phantomjs"

  # vm and shit
  brewcaskinstall "VirtualBox"
  # brewinstall docker
  # brewinstall docker-compose
  # brewinstall docker-machine

  # OSS / Package helpers
  brewinstall vitorgalvao/tiny-scripts/fastmerge
  brewinstall vitorgalvao/tiny-scripts/prfixbranch
  brewinstall vitorgalvao/tiny-scripts/prfixmaster
  npmig greenkeeper
  npmig github-labels
  npmig npm-check
  npmig updatehammer


  # meta
  # https://github.com/caskroom/homebrew-cask/blob/master/CONTRIBUTING.md#updating-a-cask
  brewinstall vitorgalvao/tiny-scripts/cask-repair

  # Android development
  # might be required http://software.intel.com/en-us/android/articles/intel-hardware-accelerated-execution-manager
  brewinstall android-sdk
  brewcaskinstall genymotion

  # YEAH I USE THAT
  brewcaskinstall "/Library/Java/JavaVirtualMachines" "java"
  brewcaskinstall "LibreOffice"

  # image
  brewcaskinstall "imageoptim"

  # multimedia
  brewcaskinstall "Last.fm" "lastfm"
  brewcaskinstall "Jubler"

  # VIDEO GAMES \o/
  brewcaskinstall "Steam"

  # Because sometimes...
  brewcaskinstall "Skype"
  brewcaskinstall "Transmission"
  brewcaskinstall "Cyberduck"

  # Data/Disk related
  brewcaskinstall "NameChanger"
  brewcaskinstall "GrandPerspective"
  brewcaskinstall "SuperDuper!" "superduper"
fi

if [[ $COMPUTER_NAME == "iMoOx" ]]
then
  # for my mouse
  brewcaskinstall "/Library/PreferencePanes/Logitech Control Center.prefPane" "logitech-control-center"
  brewcaskinstall "Utilities/Logitech Unifying Software" "logitech-unifying"

  # Better perf for non Apple SSD
  # at the end because need reboot
  #sudo trimforce enable
fi
